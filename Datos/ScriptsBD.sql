USE [CSUR]
GO
/****** Object:  Table [dbo].[TA_TIPOSERVICIO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_TIPOSERVICIO](
	[INT_CODIGOTIPOSERVICIO] [int] NOT NULL,
	[VCH_DETTIPOSERVICIO] [nvarchar](10) NOT NULL,
 CONSTRAINT [PK_TIPOSERVICIO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOTIPOSERVICIO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_TIPOSDOCUMENTO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_TIPOSDOCUMENTO](
	[INT_CODIGOTIPODOCUMENTO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [nvarchar](max) NULL,
 CONSTRAINT [PK_dbo.TA_TIPOSDOCUMENTO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOTIPODOCUMENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_TIPO_TRANSPORTE]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TIPO_TRANSPORTE](
	[INT_TIPO_TRANSPORTE] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
 CONSTRAINT [PK_TA_TIPO_TRANSPORTE] PRIMARY KEY CLUSTERED 
(
	[INT_TIPO_TRANSPORTE] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_TIPO_SERVICIO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TIPO_SERVICIO](
	[INT_CODIGOTIPOSERVICIO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
 CONSTRAINT [PK_TA_TIPO_SERVICIO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOTIPOSERVICIO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_TIPO_PAGO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TIPO_PAGO](
	[INT_TIPO_PAGO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
 CONSTRAINT [PK_TA_TIPO_PAGO] PRIMARY KEY CLUSTERED 
(
	[INT_TIPO_PAGO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_TIPO_MOVIMIENTO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TIPO_MOVIMIENTO](
	[INT_TIPO_MOVIMIENTO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](50) NULL,
 CONSTRAINT [PK_TA_TIPO_MOVIMIENTO] PRIMARY KEY CLUSTERED 
(
	[INT_TIPO_MOVIMIENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_TIPO_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TIPO_CARGA](
	[INT_TIPO_CARGA] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
 CONSTRAINT [PK_TA_TIPO_CARGA] PRIMARY KEY CLUSTERED 
(
	[INT_TIPO_CARGA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_RUTA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_RUTA](
	[INT_CODIGO_RUTA] [int] IDENTITY(1,1) NOT NULL,
	[VCH_ORIGEN] [varchar](30) NULL,
	[VCH_DESTINO] [varchar](30) NULL,
	[BLN_ESTADO] [bit] NULL,
 CONSTRAINT [PK_Table_1] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_RUTA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_ROL]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_ROL](
	[INT_CODIGO_ROL] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](50) NULL,
 CONSTRAINT [PK_TA_ROL] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_ROL] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_REFRIGERIO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[TA_REFRIGERIO](
	[INT_CODIGO_REFRIGERIO] [int] NOT NULL,
	[VCH_DESCRIPCION] [varchar](80) NOT NULL,
	[VCH_TIPO_UNIDAD] [varchar](60) NOT NULL,
 CONSTRAINT [PK_REFRIGERIO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_REFRIGERIO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_UBIGEO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_UBIGEO](
	[INT_CODIGO_UBIGEO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](50) NULL,
	[VCH_CODIGO_DEPARTAMENTO] [varchar](10) NULL,
	[VCH_CODIGO_PROVINCIA] [varchar](50) NULL,
	[VCH_CODIGO_DISTRITO] [varchar](50) NULL,
 CONSTRAINT [PK_TA_UBIGEO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_UBIGEO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_SOLICITUDES]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLICITUDES](
	[INT_CODIGOSOLICITUD] [int] IDENTITY(1,1) NOT NULL,
	[BLN_ARCHIVADA] [bit] NOT NULL,
	[DTE_FECHAREGISTRO] [datetime] NOT NULL,
	[DTE_FECHARESOLUCION] [datetime] NULL,
	[VCH_ESTADO] [int] NOT NULL,
	[VCH_OBSERVACIONES] [nvarchar](max) NULL,
	[VCH_DETALLESRESOLUCION] [nvarchar](max) NULL,
 CONSTRAINT [PK_dbo.TA_SOLICITUDES] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOSOLICITUD] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_INSUMO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[TA_INSUMO](
	[INT_CODIGO_INSUMO] [int] NOT NULL,
	[VCH_DESCRIPCION] [varchar](80) NOT NULL,
	[VCH_TIPO_UNIDAD] [varchar](60) NOT NULL,
	[DTE_FECHA_VENCIMIENTO] [smalldatetime] NOT NULL,
 CONSTRAINT [PK_INSUMO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_INSUMO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_GUIAREMISION]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_GUIAREMISION](
	[INT_CODIGO_GUIA] [int] IDENTITY(1,1) NOT NULL,
	[DTM_FECHA_TRASLADO] [datetime] NULL,
 CONSTRAINT [PK_TA_GUIAREMISION] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_GUIA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_PRODUCTO_CABINA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[TA_PRODUCTO_CABINA](
	[INT_CODIGO_PRODUCTOCABINA] [int] NOT NULL,
	[VCH_DESCRIPCION] [varchar](100) NOT NULL,
	[VCH_TIPO_UNIDAD] [varchar](60) NOT NULL,
	[DTE_FECHA_VENCIMIENTO] [smalldatetime] NOT NULL,
 CONSTRAINT [PK_PRODUCTO_CABINA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_PRODUCTOCABINA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_CARGO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_CARGO](
	[INT_CODIGOCARGO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [nvarchar](max) NULL,
 CONSTRAINT [PK_dbo.TA_CARGOS] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOCARGO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_DETALLESHOJAVIDA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_DETALLESHOJAVIDA](
	[INT_CODIGODETALLEHOJAVIDA] [int] IDENTITY(1,1) NOT NULL,
	[VCH_INSTITUCION] [nvarchar](max) NOT NULL,
	[DTE_DESDE] [datetime] NOT NULL,
	[DTE_HASTA] [datetime] NULL,
	[VCH_OBSERVACIONES] [nvarchar](max) NULL,
	[INT_CODIGOPERSONA] [int] NOT NULL,
 CONSTRAINT [PK_dbo.TA_DETALLESHOJAVIDA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGODETALLEHOJAVIDA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_ESTADOASIENTO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_ESTADOASIENTO](
	[INT_CODIGOESTASIENTO] [int] NOT NULL,
	[VCH_DETESTASIENTO] [nvarchar](20) NOT NULL,
 CONSTRAINT [PK_TA_ESTADOASIENTO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOESTASIENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_ESTADO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_ESTADO](
	[CHR_ESTADO] [char](2) NOT NULL,
	[CHR_TIPO] [char](1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
 CONSTRAINT [PK_TA_ESTADO_1] PRIMARY KEY CLUSTERED 
(
	[CHR_ESTADO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  StoredProcedure [dbo].[SP_LISTACARGASXFILTROS]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_LISTACARGASXFILTROS]

(@VCH_NOM_CLIENTE AS VARCHAR(200),

@DTM_FECHA_DESDE AS DATETIME,

@DTM_FECHA_HASTA AS DATETIME,

@CHR_ESTADO AS CHAR(2))

AS

BEGIN

DECLARE @SQL_WHERE AS VARCHAR(255)

SET @SQL_WHERE = ''



IF(LTRIM(RTRIM(@VCH_NOM_CLIENTE)) <> '')

	SET @SQL_WHERE += ' AND (L.VCH_NOMBRES LIKE ''%' + @VCH_NOM_CLIENTE + '%'' OR L.VCH_APELLIDOS LIKE ''%' + @VCH_NOM_CLIENTE + '%'')'



IF(LTRIM(RTRIM(@CHR_ESTADO)) <> '')

	SET @SQL_WHERE += ' AND C.CHR_ESTADO = ''' + @CHR_ESTADO + ''''

	

IF(DATEPART(year, @DTM_FECHA_DESDE) <> 1900 AND DATEPART(year, @DTM_FECHA_HASTA) <> 1900)

	SET @SQL_WHERE += ' AND C.DTM_FECHA_REGISTRO >= ''' + CONVERT(VARCHAR, @DTM_FECHA_DESDE, 103) + ''' AND C.DTM_FECHA_REGISTRO <= ''' + CONVERT(VARCHAR, @DTM_FECHA_HASTA , 103) + ''' '

	

EXEC('SELECT C.INT_CODIGO_CARGA,C.DTM_FECHA_REGISTRO,C.VCH_OBSERVACION,C.VCH_CODIGO_SEGURIDAD,C.DBL_PESO,C.DBL_ANCHO,C.DBL_LARGO,C.DBL_PROFUNDIDAD,C.INT_TIPO_CARGA,C.INT_TIPO_PAGO,C.INT_CODIGO_PROGRAMACION_RUTA,C.INT_CODIGO_ALMACEN,C.VCH_CLIENTE_ORIGEN,C.
INT_CODIGO_GUIA,C.CHR_ESTADO,C.VCH_CLIENTE_DESTINO 

FROM TA_CARGA C 

INNER JOIN TA_PROGRAMACION_RUTA P ON C.INT_CODIGO_PROGRAMACION_RUTA = P.INT_CODIGO_PROGRAMACION_RUTA

INNER JOIN TA_CLIENTE L ON C.VCH_CLIENTE_ORIGEN = L.VCH_DOCUMENTO

WHERE 0=0 ' + @SQL_WHERE)

END
GO
/****** Object:  StoredProcedure [dbo].[SP_LISTACARGAENTREGADA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_LISTACARGAENTREGADA]    
(@VCH_DOC_CLIENTE AS VARCHAR(15) = NULL,    
@INT_DEPARTAMENTO AS INT = -1)    
AS    
BEGIN    
DECLARE @SQL_WHERE AS VARCHAR(255)    
    
IF(LTRIM(RTRIM(@VCH_DOC_CLIENTE)) <> '')    
 SET @SQL_WHERE = ' AND C.VCH_DOCUMENTO=''' + @VCH_DOC_CLIENTE + ''' '    
     
IF(@INT_DEPARTAMENTO <> -1)    
 SET @SQL_WHERE = ' AND R.INT_UBIGEO_ORIGEN=' + CAST(@INT_DEPARTAMENTO AS VARCHAR) + ' '    
     
EXEC('SELECT A.INT_CODIGO_CARGA, C.VCH_NOMBRES + '' '' + C.VCH_APELLIDOS CLIENTE_ORIGEN, U.VCH_NOMBRE DEPARTAMENTO,    
P.DTM_FECHA_ORIGEN,  TP.VCH_NOMBRE TIPO_PAGO    
FROM TA_CARGA A     
INNER JOIN TA_CLIENTE C ON A.VCH_CLIENTE_ORIGEN = C.VCH_DOCUMENTO    
INNER JOIN TA_PROGRAMACION_RUTA P ON A.INT_CODIGO_PROGRAMACION_RUTA = P.INT_CODIGO_PROGRAMACION_RUTA    
INNER JOIN TA_RUTA R ON P.INT_CODIGO_RUTA = R.INT_CODIGO_RUTA    
INNER JOIN TA_UBIGEO U ON U.INT_CODIGO_UBIGEO = R.INT_UBIGEO_ORIGEN    
LEFT JOIN TA_TIPO_PAGO TP ON A.INT_TIPO_PAGO = TP.INT_TIPO_PAGO WHERE A.CHR_ESTADO=''RC'' ' + @SQL_WHERE)    
END
GO
/****** Object:  StoredProcedure [dbo].[SP_LISTAUTIL]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_LISTAUTIL] 
(@CHR_TIPO_UTIL AS CHAR(1),
@CHR_ENTIDAD_UTIL AS CHAR(2))
AS
BEGIN

IF(@CHR_ENTIDAD_UTIL = 'ES')
	EXEC('SELECT CHR_ESTADO CHR_UTIL, VCH_NOMBRE FROM TA_ESTADO WHERE CHR_TIPO=''' + @CHR_TIPO_UTIL + ''' ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'UD')
EXEC('SELECT INT_CODIGO_UBIGEO CHR_UTIL, VCH_NOMBRE FROM TA_UBIGEO WHERE VCH_CODIGO_PROVINCIA=''000'' AND VCH_CODIGO_DISTRITO=''000'' ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'TC')
EXEC('SELECT INT_TIPO_CARGA CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_CARGA ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'TP')
EXEC('SELECT INT_TIPO_PAGO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_PAGO ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'TM')
EXEC('SELECT INT_TIPO_MOVIMIENTO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_MOVIMIENTO ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'TS')
EXEC('SELECT INT_TIPO_SERVICIO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_SERVICIO ORDER BY VCH_NOMBRE')

IF(@CHR_ENTIDAD_UTIL = 'TT')
EXEC('SELECT INT_TIPO_TRANSPORTE CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_SERVICIO ORDER BY VCH_NOMBRE')

END
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCACLIENTEXDNI]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCACLIENTEXDNI]
(@VCH_DOCUMENTO AS VARCHAR(15))
AS
BEGIN
EXEC('SELECT VCH_DOCUMENTO,VCH_NOMBRES,VCH_APELLIDOS,VCH_DIRECCION,VCH_CORREO,VCH_RUTA_FOTO,VCH_TELEFONO,INT_UBIGEO
FROM TA_CLIENTE WHERE VCH_DOCUMENTO = ''' + @VCH_DOCUMENTO + '''')
END
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAUTILXCODIGO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAUTILXCODIGO] 
(@CHR_CODIGO AS VARCHAR(5),
@CHR_ENTIDAD_UTIL AS CHAR(2))
AS
BEGIN

IF(@CHR_ENTIDAD_UTIL = 'ES')
	EXEC('SELECT CHR_ESTADO CHR_UTIL, VCH_NOMBRE FROM TA_ESTADO WHERE CHR_ESTADO=''' + @CHR_CODIGO + '''')

IF(@CHR_ENTIDAD_UTIL = 'UD')
EXEC('SELECT INT_CODIGO_UBIGEO CHR_UTIL, VCH_NOMBRE FROM TA_UBIGEO WHERE INT_CODIGO_UBIGEO=' + @CHR_CODIGO)

IF(@CHR_ENTIDAD_UTIL = 'TC')
EXEC('SELECT INT_TIPO_CARGA CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_CARGA WHERE INT_TIPO_CARGA=' + @CHR_CODIGO)

IF(@CHR_ENTIDAD_UTIL = 'TP')
EXEC('SELECT INT_TIPO_PAGO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_PAGO WHERE INT_TIPO_PAGO=' + @CHR_CODIGO)

IF(@CHR_ENTIDAD_UTIL = 'TM')
EXEC('SELECT INT_TIPO_MOVIMIENTO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_MOVIMIENTO WHERE INT_TIPO_MOVIMIENTO=' + @CHR_CODIGO)

IF(@CHR_ENTIDAD_UTIL = 'TS')
EXEC('SELECT INT_TIPO_SERVICIO CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_SERVICIO WHERE INT_TIPO_SERVICIO=' + @CHR_CODIGO)

IF(@CHR_ENTIDAD_UTIL = 'TT')
EXEC('SELECT INT_TIPO_TRANSPORTE CHR_UTIL, VCH_NOMBRE FROM TA_TIPO_SERVICIO WHERE INT_TIPO_TRANSPORTE=' + @CHR_CODIGO)

END
GO
/****** Object:  Table [dbo].[TA_AGENCIA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_AGENCIA](
	[INT_CODIGO_AGENCIA] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](100) NULL,
	[VCH_DIRECCION] [varchar](100) NULL,
	[INT_UBIGEO_DIRECCION] [int] NULL,
 CONSTRAINT [PK_TA_AGENCIA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_AGENCIA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_EDUCACIONES]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_EDUCACIONES](
	[INT_CODIGODETALLEHOJAVIDA] [int] NOT NULL,
	[VCH_TIPO] [nvarchar](max) NOT NULL,
	[VCH_GRADOOBTENIDO] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_dbo.TA_EDUCACIONES] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGODETALLEHOJAVIDA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_CLIENTE]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_CLIENTE](
	[VCH_DOCUMENTO] [varchar](15) NOT NULL,
	[VCH_NOMBRES] [varchar](100) NULL,
	[VCH_APELLIDOS] [varchar](100) NULL,
	[VCH_DIRECCION] [varchar](100) NULL,
	[VCH_CORREO] [varchar](100) NULL,
	[VCH_RUTA_FOTO] [varchar](100) NULL,
	[VCH_TELEFONO] [varchar](50) NULL,
	[INT_UBIGEO] [int] NULL,
 CONSTRAINT [PK_TA_CLIENTE] PRIMARY KEY CLUSTERED 
(
	[VCH_DOCUMENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_PERSONA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_PERSONA](
	[INT_CODIGOPERSONA] [int] NOT NULL,
	[INT_CODIGOTIPODOCUMENTO] [int] NULL,
	[VCH_NUMERODOCUMENTO] [varchar](15) NULL,
	[VCH_APEPATPERSONA] [varchar](30) NOT NULL,
	[VCH_APEMATPERSONA] [varchar](30) NOT NULL,
	[VCH_NOMBREPERSONA] [varchar](30) NOT NULL,
	[DTE_FECHANACIMIENTO] [smalldatetime] NULL,
	[VCH_FOTO] [nchar](10) NULL,
	[VCH_DIRECCION] [varchar](50) NULL,
	[VCH_TELEFONO] [varchar](20) NULL,
	[CHR_SEXOPERSONA] [char](1) NOT NULL,
	[INT_CODIGOCARGO] [int] NULL,
	[BLN_ACTIVO] [bit] NOT NULL,
 CONSTRAINT [PK_PERSONA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOPERSONA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_VEHICULO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_VEHICULO](
	[INT_VEHICULO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_PLACA] [varchar](15) NULL,
	[VCH_MARCA] [varchar](50) NULL,
	[VCH_MODELO] [varchar](50) NULL,
	[VCH_COLOR] [varchar](50) NULL,
	[INT_TIPO_TRANSPORTE] [int] NULL,
 CONSTRAINT [PK_TA_VEHICULO] PRIMARY KEY CLUSTERED 
(
	[INT_VEHICULO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_USUARIO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_USUARIO](
	[INT_CODIGO_USUARIO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_USUARIO] [varchar](50) NULL,
	[VCH_CLAVE] [varchar](50) NULL,
	[INT_CODIGO_ROL] [int] NULL,
	[INT_CODIGO_UBIGEO] [int] NULL,
	[VCH_NOMBRES] [varchar](50) NULL,
 CONSTRAINT [PK_TA_USUARIO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_USUARIO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_SOLICITUDCOCINA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLICITUDCOCINA](
	[INT_CODIGO_SOLICITUDCOCINA] [int] NOT NULL,
	[INT_CODIGO_REFRIGERIO] [int] NOT NULL,
	[INT_CODIGO_RUTA_PROGRAMADA] [int] NOT NULL,
	[INT_CANTIDAD] [int] NULL,
	[BLN_ESTADO] [bit] NOT NULL,
 CONSTRAINT [PK_SOLPRODCOCINA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_SOLICITUDCOCINA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_EXPERIENCIASLABORAL]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_EXPERIENCIASLABORAL](
	[INT_CODIGODETALLEHOJAVIDA] [int] NOT NULL,
	[VCH_CARGO] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_dbo.TA_EXPERIENCIASLABORALES] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGODETALLEHOJAVIDA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_SOLICITUDESPERSONAL]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLICITUDESPERSONAL](
	[INT_CODIGOSOLICITUD] [int] NOT NULL,
	[DTE_FECHAVENCIMIENTO] [datetime] NOT NULL,
	[VCH_ASUNTO] [nvarchar](max) NULL,
	[VCH_DESCRIPCION] [nvarchar](max) NULL,
 CONSTRAINT [PK_dbo.TA_SOLICITUDESPERSONAL] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOSOLICITUD] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_PROGRAMACION_RUTA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_PROGRAMACION_RUTA](
	[INT_CODIGO_PROGRAMACION_RUTA] [int] IDENTITY(1,1) NOT NULL,
	[INT_CODIGO_RUTA] [int] NULL,
	[DTM_FECHA_ORIGEN] [datetime] NULL,
	[DTM_FECHA_DESTINO] [datetime] NULL,
	[TIM_HORA_SALIDA] [time](7) NULL,
	[TIM_HORA_LLEGADA] [time](7) NULL,
	[INT_TIPO_SERVICIO] [int] NULL,
	[INT_CODIGOVEHICULO] [int] NULL,
	[BLN_ESTADO] [bit] NULL,
 CONSTRAINT [PK_TA_PROGRAMACION_RUTA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_PROGRAMACION_RUTA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_SOLICITUDESCAPACITACION]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLICITUDESCAPACITACION](
	[INT_CODIGOSOLICITUD] [int] NOT NULL,
	[DTE_FECHAPLANIFICADA] [datetime] NOT NULL,
	[INT_CODIGOPERSONA] [int] NOT NULL,
	[VCH_ESPECIALIDAD] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_dbo.TA_SOLICITUDESCAPACITACION] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOSOLICITUD] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_EVALUACION_DESEMPENO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_EVALUACION_DESEMPENO](
	[INT_CODIGOEVALUACIONDESEMPENO] [int] NOT NULL,
	[DTM_FECHA] [date] NULL,
	[INT_NOTA] [int] NULL,
	[VCH_OBSERVACIONES] [varchar](250) NULL,
	[INT_CODIGOPERSONA] [int] NOT NULL,
	[INT_CODIGOEVALUADO] [int] NOT NULL,
 CONSTRAINT [PK_TA_EVALUACION_DESEMPENO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOEVALUACIONDESEMPENO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_SOLICITUDINSUMO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLICITUDINSUMO](
	[INT_CODIGO_SOLICITUDINSUMO] [int] NOT NULL,
	[INT_CODIGO_SOLICITUDCOCINA] [int] NOT NULL,
	[INT_CODIGO_INSUMO] [int] NOT NULL,
	[DTE_FECHA_SOLICITUD] [smalldatetime] NOT NULL,
	[INT_CANTIDAD] [int] NULL,
	[VCH_UNIDAD] [nvarchar](10) NOT NULL,
	[BLN_ESTADO] [bit] NOT NULL,
 CONSTRAINT [PK_SOLICITUDINSUMO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_SOLICITUDINSUMO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_PASAJERO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_PASAJERO](
	[INT_CODIGOPASAJERO] [int] NOT NULL,
	[INT_CODIGOPERSONA] [int] NOT NULL,
	[INT_EDADPASAJERO] [int] NULL,
	[BLN_ACTIVO] [bit] NOT NULL,
 CONSTRAINT [PK_TA_PASAJERO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOPASAJERO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_ASIENTOVEHICULO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[TA_ASIENTOVEHICULO](
	[INT_VEHICULO] [int] NOT NULL,
	[DTE_FECHASALIDA] [smalldatetime] NOT NULL,
	[DTE_HORASALIDA] [smalldatetime] NOT NULL,
	[CHR_ASIENTO] [char](2) NOT NULL,
	[INT_CODIGOESTASIENTO] [int] NOT NULL,
 CONSTRAINT [PK_ASIENTOVEHICULO] PRIMARY KEY CLUSTERED 
(
	[INT_VEHICULO] ASC,
	[DTE_FECHASALIDA] ASC,
	[DTE_HORASALIDA] ASC,
	[CHR_ASIENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_ALMACEN]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_ALMACEN](
	[INT_CODIGO_ALMACEN] [int] IDENTITY(1,1) NOT NULL,
	[INT_CODIGO_AGENCIA] [int] NULL,
	[VCH_NOMBRE] [varchar](50) NULL,
	[VCH_DESCRIPCION] [varchar](100) NULL,
 CONSTRAINT [PK_TA_ALMACEN] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_ALMACEN] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  StoredProcedure [dbo].[SP_VALIDAUSUARIO]    Script Date: 09/03/2014 12:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_VALIDAUSUARIO]    
(@VCH_USUARIO AS VARCHAR(50),    
@VCH_CLAVE AS VARCHAR(50))    
AS    
BEGIN    
SELECT U.INT_CODIGO_USUARIO,U.VCH_USUARIO,U.VCH_CLAVE,U.INT_CODIGO_ROL,U.VCH_NOMBRES,R.VCH_NOMBRE ROL,U.INT_CODIGO_UBIGEO, UB.VCH_NOMBRE NOM_DEPARTAMENTO
FROM TA_USUARIO U     
INNER JOIN TA_ROL R ON U.INT_CODIGO_ROL = R.INT_CODIGO_ROL    
INNER JOIN TA_UBIGEO UB ON U.INT_CODIGO_UBIGEO = UB.INT_CODIGO_UBIGEO
WHERE U.VCH_USUARIO = @VCH_USUARIO AND U.VCH_CLAVE = @VCH_CLAVE    
END 


SELECT * FROM TA_UBIGEO
GO
/****** Object:  StoredProcedure [dbo].[SP_OBTENERPROGRAMACIONRUTAXCODIGO]    Script Date: 09/03/2014 12:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_OBTENERPROGRAMACIONRUTAXCODIGO]
(@INT_CODIGO_PROGRAMACIONRUTA AS INT)
AS
SELECT PR.INT_CODIGO_PROGRAMACION_RUTA,PR.DTM_FECHA_ORIGEN,PR.DTM_FECHA_DESTINO,AG.VCH_NOMBRE VCH_AGENCIA,TS.VCH_NOMBRE VCH_TIPO_SERVICIO,TT.VCH_NOMBRE VCH_TIPO_TRANSPORTE, AG.VCH_DIRECCION VCH_DIRECCION_AGENCIA
FROM TA_PROGRAMACION_RUTA PR
INNER JOIN TA_RUTA RU ON PR.INT_CODIGO_RUTA = RU.INT_CODIGO_RUTA
INNER JOIN TA_TIPO_SERVICIO TS ON PR.INT_TIPO_SERVICIO = TS.INT_TIPO_SERVICIO
INNER JOIN TA_AGENCIA AG ON AG.INT_UBIGEO_DIRECCION = RU.INT_UBIGEO_DESTINO
INNER JOIN TA_VEHICULO VE ON PR.INT_VEHICULO = VE.INT_VEHICULO
INNER JOIN TA_TIPO_TRANSPORTE TT ON VE.INT_TIPO_TRANSPORTE = TT.INT_TIPO_TRANSPORTE
WHERE PR.INT_CODIGO_PROGRAMACION_RUTA = @INT_CODIGO_PROGRAMACIONRUTA
ORDER BY DTM_FECHA_ORIGEN
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAPROGRAMACIONRUTAXDEPARTAMENTO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAPROGRAMACIONRUTAXDEPARTAMENTO]  
(@INT_CODIGO_UBIGEO_ORIGEN AS INT,
@INT_CODIGO_UBIGEO_DESTINO AS INT)  
AS  
SELECT PR.INT_CODIGO_PROGRAMACION_RUTA,PR.DTM_FECHA_ORIGEN,PR.DTM_FECHA_DESTINO,AG.VCH_NOMBRE VCH_AGENCIA,TS.VCH_NOMBRE VCH_TIPO_SERVICIO,TT.VCH_NOMBRE VCH_TIPO_TRANSPORTE, AG.VCH_DIRECCION VCH_DIRECCION_AGENCIA  
FROM TA_PROGRAMACION_RUTA PR  
INNER JOIN TA_RUTA RU ON PR.INT_CODIGO_RUTA = RU.INT_CODIGO_RUTA  
INNER JOIN TA_TIPO_SERVICIO TS ON PR.INT_TIPO_SERVICIO = TS.INT_TIPO_SERVICIO  
INNER JOIN TA_AGENCIA AG ON AG.INT_UBIGEO_DIRECCION = RU.INT_UBIGEO_DESTINO  
INNER JOIN TA_VEHICULO VE ON PR.INT_VEHICULO = VE.INT_VEHICULO  
INNER JOIN TA_TIPO_TRANSPORTE TT ON VE.INT_TIPO_TRANSPORTE = TT.INT_TIPO_TRANSPORTE  
WHERE (RU.INT_UBIGEO_DESTINO = @INT_CODIGO_UBIGEO_DESTINO or @INT_CODIGO_UBIGEO_DESTINO = -1)  
AND RU.INT_UBIGEO_ORIGEN = @INT_CODIGO_UBIGEO_ORIGEN
ORDER BY DTM_FECHA_ORIGEN
GO
/****** Object:  StoredProcedure [dbo].[SP_BUSCAPROGRAMACIONRUTAXCODIGO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_BUSCAPROGRAMACIONRUTAXCODIGO]

(@INT_CODIGO_PROGRAMACIONRUTA AS INT)

AS

BEGIN

SELECT PR.INT_CODIGO_PROGRAMACION_RUTA,PR.DTM_FECHA_ORIGEN,PR.DTM_FECHA_DESTINO,AG.VCH_NOMBRE VCH_AGENCIA,TS.VCH_NOMBRE VCH_TIPO_SERVICIO,TT.VCH_NOMBRE VCH_TIPO_TRANSPORTE, AG.VCH_DIRECCION VCH_DIRECCION_AGENCIA

FROM TA_PROGRAMACION_RUTA PR

INNER JOIN TA_RUTA RU ON PR.INT_CODIGO_RUTA = RU.INT_CODIGO_RUTA

INNER JOIN TA_TIPO_SERVICIO TS ON PR.INT_TIPO_SERVICIO = TS.INT_TIPO_SERVICIO

INNER JOIN TA_AGENCIA AG ON AG.INT_UBIGEO_DIRECCION = RU.INT_UBIGEO_DESTINO

INNER JOIN TA_VEHICULO VE ON PR.INT_VEHICULO = VE.INT_VEHICULO

INNER JOIN TA_TIPO_TRANSPORTE TT ON VE.INT_TIPO_TRANSPORTE = TT.INT_TIPO_TRANSPORTE

WHERE PR.INT_CODIGO_PROGRAMACION_RUTA = @INT_CODIGO_PROGRAMACIONRUTA

END
GO
/****** Object:  Table [dbo].[TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_CARGA](
	[INT_CODIGO_CARGA] [int] IDENTITY(1,1) NOT NULL,
	[DTM_FECHA_REGISTRO] [datetime] NULL,
	[VCH_OBSERVACION] [varchar](255) NULL,
	[VCH_CODIGO_SEGURIDAD] [varchar](10) NULL,
	[DBL_PESO] [decimal](8, 2) NULL,
	[DBL_ANCHO] [decimal](8, 2) NULL,
	[DBL_LARGO] [decimal](8, 2) NULL,
	[DBL_PROFUNDIDAD] [decimal](8, 2) NULL,
	[INT_TIPO_CARGA] [int] NULL,
	[INT_TIPO_PAGO] [int] NULL,
	[INT_CODIGO_PROGRAMACION_RUTA] [int] NULL,
	[INT_CODIGO_ALMACEN] [int] NULL,
	[VCH_CLIENTE_ORIGEN] [varchar](15) NULL,
	[INT_CODIGO_GUIA] [int] NULL,
	[CHR_ESTADO] [char](2) NULL,
	[VCH_CLIENTE_DESTINO] [varchar](15) NULL,
 CONSTRAINT [PK_TA_CARGA_1] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_CARGA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_BOLETO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING OFF
GO
CREATE TABLE [dbo].[TA_BOLETO](
	[INT_CODIGOBOLETO] [int] NOT NULL,
	[INT_CODIGOPASAJERO] [int] NOT NULL,
	[INT_CODIGOTIPOSERVICIO] [int] NOT NULL,
	[INT_CODIGOPERSONA] [int] NOT NULL,
	[INT_VEHICULO] [int] NOT NULL,
	[CHR_NUMEROBOLETO] [char](10) NOT NULL,
	[DEC_PRECIOPASAJE] [decimal](12, 2) NOT NULL,
	[DTE_FECHACHECKIN] [smalldatetime] NULL,
	[VCH_ORIGEN] [varchar](30) NULL,
	[VCH_DESTINO] [varchar](30) NULL,
	[DTE_FECHASALIDA] [smalldatetime] NOT NULL,
	[DTE_HORASALIDA] [smalldatetime] NOT NULL,
	[CHR_ASIENTO] [char](2) NULL,
	[VCH_UBICACION] [varchar](60) NULL,
	[BLN_ACTIVO] [bit] NOT NULL,
 CONSTRAINT [PK_TA_BOLETO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGOBOLETO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_SOLPRODUCTODECABINA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_SOLPRODUCTODECABINA](
	[INT_CODIGO_SOLPRODUCTODECABINA] [int] NOT NULL,
	[DTE_FECHA_SOLICITUD] [smalldatetime] NOT NULL,
	[INT_CODIGO_PRODUCTOCABINA] [int] NOT NULL,
	[INT_CODIGO_PROGRAMACION_RUTA] [int] NOT NULL,
	[INT_CANTIDAD] [int] NOT NULL,
	[BLN_ESTADO] [bit] NOT NULL,
 CONSTRAINT [PK_SOLPRODUCTODECABINA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_SOLPRODUCTODECABINA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_TRAZABILIDADCARGA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_TRAZABILIDADCARGA](
	[INT_CODIGO_CARGA] [int] NOT NULL,
	[VCH_OBSERVACIONES] [varchar](100) NULL,
	[CHR_ESTADO] [char](2) NOT NULL,
	[DTM_FECHA_REGISTRO] [datetime] NULL,
 CONSTRAINT [PK_TA_TRAZABILIDADCARGA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_CARGA] ASC,
	[CHR_ESTADO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_STOCK]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[TA_STOCK](
	[INT_CODIGO_PRODUCTOCABINA] [int] NOT NULL,
	[INT_CODIGO_ALMACEN] [int] NOT NULL,
	[INT_CANTIDAD_INICIAL] [int] NOT NULL,
	[INT_STOCK_MINIMO] [int] NOT NULL,
 CONSTRAINT [PK_STOCK] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_PRODUCTOCABINA] ASC,
	[INT_CODIGO_ALMACEN] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[TA_PRODUCTO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_PRODUCTO](
	[INT_CODIGO_PRODUCTO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_NOMBRE] [varchar](50) NULL,
	[VCH_DESCRIPCION] [varchar](100) NULL,
	[INT_CODIGO_CARGA] [int] NULL,
 CONSTRAINT [PK_TA_PRODUCTO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_PRODUCTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_FICHA_MOVIMIENTO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_FICHA_MOVIMIENTO](
	[INT_CODIGO_MOVIMIENTO] [int] IDENTITY(1,1) NOT NULL,
	[VCH_DESCRIPCION] [varchar](200) NULL,
	[DTM_FECHA] [datetime] NULL,
	[INT_CODIGO_CARGA] [int] NULL,
	[INT_TIPO_MOVIMIENTO] [int] NULL,
 CONSTRAINT [PK_TA_FICHA_MOVIMIENTO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_MOVIMIENTO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_PAGO]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_PAGO](
	[DBL_MONTO] [decimal](15, 4) NULL,
	[DTM_FECHA_REGISTRO] [datetime] NULL,
	[CHR_ESTADO] [char](2) NULL,
	[INT_CODIGO_CARGA] [int] NOT NULL,
 CONSTRAINT [PK_TA_PAGO] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_CARGA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[TA_CARGOENTREGA]    Script Date: 09/03/2014 12:33:17 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[TA_CARGOENTREGA](
	[INT_CODIGO_CARGA] [int] NOT NULL,
	[VCH_OBSERVACIONES] [varchar](100) NULL,
	[CHR_ESTADO] [char](1) NULL,
 CONSTRAINT [PK_TA_CARGOENTREGA] PRIMARY KEY CLUSTERED 
(
	[INT_CODIGO_CARGA] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTARCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTARCARGA]
(@VCH_DOC_CLIENTE_ORIGEN AS VARCHAR(15),
@VCH_DOC_CLIENTE_DESTINO AS VARCHAR(15),
@INT_TIPO_CARGA AS INT, 
@INT_TIPO_PAGO AS INT,
@VCH_OBSERVACIONES AS VARCHAR(255),
@DBL_PESO AS DECIMAL(8,2),
@DBL_LARGO AS DECIMAL(8,2),
@DBL_ANCHO AS DECIMAL(8,2),
@DBL_PROFUNDIDAD AS DECIMAL(8,2),
@INT_PROGRAMACION_RUTA AS INT, 
@VCH_CODIGO_SEGURIDAD AS VARCHAR(10) OUTPUT,
@INT_CODIGO_CARGA AS INT OUTPUT)
AS
BEGIN

DECLARE @INT_CODIGO_ALMACEN AS INT
DECLARE @UBIGEO_ORIGEN AS INT
SET @INT_CODIGO_ALMACEN  = 0
SET @UBIGEO_ORIGEN  = 0

SET @VCH_CODIGO_SEGURIDAD = CAST(CAST(RAND() * 999999 + 100000 AS INT) AS VARCHAR(6)) --RANDOM  100000 + 

SELECT @UBIGEO_ORIGEN = INT_UBIGEO_ORIGEN FROM TA_RUTA WHERE INT_CODIGO_RUTA IN (SELECT INT_CODIGO_RUTA FROM TA_PROGRAMACION_RUTA WHERE INT_CODIGO_PROGRAMACION_RUTA = @INT_PROGRAMACION_RUTA)
SELECT @INT_CODIGO_ALMACEN = INT_CODIGO_ALMACEN FROM TA_AGENCIA A INNER JOIN TA_ALMACEN L ON  A.INT_CODIGO_AGENCIA = L.INT_CODIGO_AGENCIA WHERE INT_UBIGEO_DIRECCION = @UBIGEO_ORIGEN 

INSERT INTO TA_CARGA (DTM_FECHA_REGISTRO,VCH_OBSERVACION,VCH_CODIGO_SEGURIDAD,DBL_PESO,DBL_ANCHO,DBL_LARGO,DBL_PROFUNDIDAD,INT_TIPO_CARGA,INT_TIPO_PAGO,INT_CODIGO_PROGRAMACION_RUTA,INT_CODIGO_ALMACEN,VCH_CLIENTE_ORIGEN,INT_CODIGO_GUIA,CHR_ESTADO,VCH_CLIENTE_DESTINO)
VALUES (GETDATE(), @VCH_OBSERVACIONES, @VCH_CODIGO_SEGURIDAD, @DBL_PESO, @DBL_ANCHO, @DBL_LARGO, @DBL_PROFUNDIDAD, @INT_TIPO_CARGA, @INT_TIPO_PAGO, @INT_PROGRAMACION_RUTA, @INT_CODIGO_ALMACEN, @VCH_DOC_CLIENTE_ORIGEN, NULL, 'IN', @VCH_DOC_CLIENTE_DESTINO)

SET @INT_CODIGO_CARGA = SCOPE_IDENTITY()

END
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINARCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINARCARGA]
(@INT_CODIGO_CARGA AS INT)
AS
BEGIN
DELETE FROM TA_CARGA  WHERE INT_CODIGO_CARGA=@INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_CAMBIARESTADOCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_CAMBIARESTADOCARGA]
(
@INT_CODIGO_CARGA AS INT
)
AS
BEGIN
	UPDATE TA_CARGA SET CHR_ESTADO = 'ET' WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_VERIFICARCARGAXCODIGOSEGURIDAD]    Script Date: 09/03/2014 12:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_VERIFICARCARGAXCODIGOSEGURIDAD]  
(  
@INT_CODIGO_CARGA AS INT,  
@VCH_CODIGO_SEGURIDAD AS VARCHAR(15),
@VCH_DNI_CLIENTEDESTINO AS VARCHAR(15)    
)  
AS  
BEGIN  
 --SELECT COUNT(1) TOTAL FROM TA_CARGA WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA AND VCH_CODIGO_SEGURIDAD = @VCH_CODIGO_SEGURIDAD  
 SELECT COUNT(1) TOTAL FROM TA_CARGA WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA AND VCH_CODIGO_SEGURIDAD = @VCH_CODIGO_SEGURIDAD  AND VCH_CLIENTE_DESTINO = @VCH_DNI_CLIENTEDESTINO
END
GO
/****** Object:  StoredProcedure [dbo].[SP_OBTENERCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_OBTENERCARGA]
(@INT_CODIGO_CARGA AS INT)
AS 
BEGIN
SELECT INT_CODIGO_CARGA,DTM_FECHA_REGISTRO,VCH_OBSERVACION,VCH_CODIGO_SEGURIDAD,DBL_PESO,DBL_ANCHO,DBL_LARGO,DBL_PROFUNDIDAD,INT_TIPO_CARGA,INT_TIPO_PAGO,INT_CODIGO_PROGRAMACION_RUTA,INT_CODIGO_ALMACEN,VCH_CLIENTE_ORIGEN,INT_CODIGO_GUIA,CHR_ESTADO,VCH_CLIENTE_DESTINO
FROM TA_CARGA WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_ACTUALIZARCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ACTUALIZARCARGA]  
(@VCH_OBSERVACIONES AS VARCHAR(255),  
@INT_PROGRAMACION_RUTA AS INT,   
@INT_CODIGO_CARGA AS INT,  
@VCH_DNI_DESTINO AS VARCHAR(15),
@VCH_ESTADO AS CHAR(2))  
AS  
BEGIN  
  
DECLARE @INT_CODIGO_ALMACEN AS INT  
DECLARE @UBIGEO_ORIGEN AS INT  
SET @INT_CODIGO_ALMACEN  = 0  
SET @UBIGEO_ORIGEN  = 0  
  
SELECT @UBIGEO_ORIGEN = INT_UBIGEO_ORIGEN FROM TA_RUTA WHERE INT_CODIGO_RUTA IN (SELECT INT_CODIGO_RUTA FROM TA_PROGRAMACION_RUTA WHERE INT_CODIGO_PROGRAMACION_RUTA = @INT_PROGRAMACION_RUTA)  
SELECT @INT_CODIGO_ALMACEN = INT_CODIGO_ALMACEN FROM TA_AGENCIA A INNER JOIN TA_ALMACEN L ON  A.INT_CODIGO_AGENCIA = L.INT_CODIGO_AGENCIA WHERE INT_UBIGEO_DIRECCION = @UBIGEO_ORIGEN   
  
UPDATE TA_CARGA SET CHR_ESTADO =@VCH_ESTADO,VCH_CLIENTE_DESTINO=@VCH_DNI_DESTINO,VCH_OBSERVACION=@VCH_OBSERVACIONES,INT_CODIGO_PROGRAMACION_RUTA=@INT_PROGRAMACION_RUTA,INT_CODIGO_ALMACEN=@INT_CODIGO_ALMACEN WHERE INT_CODIGO_CARGA=@INT_CODIGO_CARGA  
  
END
GO
/****** Object:  StoredProcedure [dbo].[SP_OBTENERPAGOXCARGA]    Script Date: 09/03/2014 12:33:15 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_OBTENERPAGOXCARGA]
(@INT_CODIGO_CARGA AS INT)
AS 
BEGIN
SELECT DBL_MONTO,DTM_FECHA_REGISTRO,CHR_ESTADO,INT_CODIGO_CARGA FROM TA_PAGO WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_LISTAPRODUCTOXCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_LISTAPRODUCTOXCARGA]
(@INT_CODIGO_CARGA AS INT)
AS
BEGIN
SELECT INT_CODIGO_PRODUCTO,VCH_NOMBRE,VCH_DESCRIPCION,INT_CODIGO_CARGA FROM TA_PRODUCTO WHERE INT_CODIGO_CARGA=@INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTARPRODUCTO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTARPRODUCTO]
(@INT_CODIGO_CARGA AS INT,
@VCH_NOMBRE AS VARCHAR(50),
@VCH_DESCRIPCION AS VARCHAR(200))
AS
BEGIN
INSERT INTO TA_PRODUCTO (VCH_NOMBRE,VCH_DESCRIPCION,INT_CODIGO_CARGA) 
VALUES (@VCH_NOMBRE, @VCH_DESCRIPCION, @INT_CODIGO_CARGA)
END
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTARPAGO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_INSERTARPAGO]
(@CHR_ESTADO AS CHAR(2),
@INT_CODIGO_CARGA AS INT,
@DBL_MONTO AS DECIMAL(15,4))
AS 
BEGIN
INSERT INTO TA_PAGO VALUES (@DBL_MONTO, GETDATE(), @CHR_ESTADO, @INT_CODIGO_CARGA)
END
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINARPRODUCTOXCARGA]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINARPRODUCTOXCARGA]
(@INT_CODIGO_CARGA AS INT)
AS 
BEGIN
DELETE FROM TA_PRODUCTO WHERE INT_CODIGO_CARGA=@INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINARPRODUCTO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINARPRODUCTO]
(@INT_CODIGO_PRODUCTO AS INT)
AS
BEGIN
DELETE FROM TA_PRODUCTO WHERE INT_CODIGO_PRODUCTO = @INT_CODIGO_PRODUCTO
END
GO
/****** Object:  StoredProcedure [dbo].[SP_ELIMINARPAGO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ELIMINARPAGO]
(@INT_CODIGO_CARGA AS INT)
AS
BEGIN
DELETE FROM TA_PAGO WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA
END
GO
/****** Object:  StoredProcedure [dbo].[SP_ACTUALIZARPAGO]    Script Date: 09/03/2014 12:33:14 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[SP_ACTUALIZARPAGO]
(@CHR_ESTADO AS CHAR(2),
@INT_CODIGO_CARGA AS INT)
AS 
BEGIN
UPDATE TA_PAGO SET CHR_ESTADO = @CHR_ESTADO WHERE INT_CODIGO_CARGA = @INT_CODIGO_CARGA
END
GO
/****** Object:  Default [DF__TA_BOLETO__BLN_A__6E01572D]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO] ADD  DEFAULT ((1)) FOR [BLN_ACTIVO]
GO
/****** Object:  Default [DF__TA_PASAJE__BLN_A__6EF57B66]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PASAJERO] ADD  DEFAULT ((1)) FOR [BLN_ACTIVO]
GO
/****** Object:  Default [DF__TA_PERSON__BLN_A__4BAC3F29]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PERSONA] ADD  CONSTRAINT [DF__TA_PERSON__BLN_A__4BAC3F29]  DEFAULT ((1)) FOR [BLN_ACTIVO]
GO
/****** Object:  ForeignKey [FK_TA_AGENCIA_TA_UBIGEO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_AGENCIA]  WITH CHECK ADD  CONSTRAINT [FK_TA_AGENCIA_TA_UBIGEO] FOREIGN KEY([INT_UBIGEO_DIRECCION])
REFERENCES [dbo].[TA_UBIGEO] ([INT_CODIGO_UBIGEO])
GO
ALTER TABLE [dbo].[TA_AGENCIA] CHECK CONSTRAINT [FK_TA_AGENCIA_TA_UBIGEO]
GO
/****** Object:  ForeignKey [FK_TA_ALMACEN_TA_AGENCIA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_ALMACEN]  WITH CHECK ADD  CONSTRAINT [FK_TA_ALMACEN_TA_AGENCIA] FOREIGN KEY([INT_CODIGO_AGENCIA])
REFERENCES [dbo].[TA_AGENCIA] ([INT_CODIGO_AGENCIA])
GO
ALTER TABLE [dbo].[TA_ALMACEN] CHECK CONSTRAINT [FK_TA_ALMACEN_TA_AGENCIA]
GO
/****** Object:  ForeignKey [FK_TA_ASIEN_REFERENCE_TA_ESTAD]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_ASIENTOVEHICULO]  WITH CHECK ADD  CONSTRAINT [FK_TA_ASIEN_REFERENCE_TA_ESTAD] FOREIGN KEY([INT_CODIGOESTASIENTO])
REFERENCES [dbo].[TA_ESTADOASIENTO] ([INT_CODIGOESTASIENTO])
GO
ALTER TABLE [dbo].[TA_ASIENTOVEHICULO] CHECK CONSTRAINT [FK_TA_ASIEN_REFERENCE_TA_ESTAD]
GO
/****** Object:  ForeignKey [FK_TA_ASIEN_REFERENCE_TA_VEHIC]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_ASIENTOVEHICULO]  WITH CHECK ADD  CONSTRAINT [FK_TA_ASIEN_REFERENCE_TA_VEHIC] FOREIGN KEY([INT_VEHICULO])
REFERENCES [dbo].[TA_VEHICULO] ([INT_VEHICULO])
GO
ALTER TABLE [dbo].[TA_ASIENTOVEHICULO] CHECK CONSTRAINT [FK_TA_ASIEN_REFERENCE_TA_VEHIC]
GO
/****** Object:  ForeignKey [FK_TA_BOLET_REFERENCE_TA_PASAJ]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO]  WITH CHECK ADD  CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_PASAJ] FOREIGN KEY([INT_CODIGOPASAJERO])
REFERENCES [dbo].[TA_PASAJERO] ([INT_CODIGOPASAJERO])
GO
ALTER TABLE [dbo].[TA_BOLETO] CHECK CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_PASAJ]
GO
/****** Object:  ForeignKey [FK_TA_BOLET_REFERENCE_TA_TIPOS]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO]  WITH CHECK ADD  CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_TIPOS] FOREIGN KEY([INT_CODIGOTIPOSERVICIO])
REFERENCES [dbo].[TA_TIPOSERVICIO] ([INT_CODIGOTIPOSERVICIO])
GO
ALTER TABLE [dbo].[TA_BOLETO] CHECK CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_TIPOS]
GO
/****** Object:  ForeignKey [FK_TA_BOLET_REFERENCE_TA_VEHIC]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO]  WITH CHECK ADD  CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_VEHIC] FOREIGN KEY([INT_VEHICULO])
REFERENCES [dbo].[TA_VEHICULO] ([INT_VEHICULO])
GO
ALTER TABLE [dbo].[TA_BOLETO] CHECK CONSTRAINT [FK_TA_BOLET_REFERENCE_TA_VEHIC]
GO
/****** Object:  ForeignKey [FK_TA_BOLETO_TA_PERSONA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO]  WITH CHECK ADD  CONSTRAINT [FK_TA_BOLETO_TA_PERSONA] FOREIGN KEY([INT_CODIGOPERSONA])
REFERENCES [dbo].[TA_PERSONA] ([INT_CODIGOPERSONA])
GO
ALTER TABLE [dbo].[TA_BOLETO] CHECK CONSTRAINT [FK_TA_BOLETO_TA_PERSONA]
GO
/****** Object:  ForeignKey [FK_TA_BOLETO_TA_TIPO_SERVICIO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_BOLETO]  WITH CHECK ADD  CONSTRAINT [FK_TA_BOLETO_TA_TIPO_SERVICIO] FOREIGN KEY([INT_CODIGOTIPOSERVICIO])
REFERENCES [dbo].[TA_TIPO_SERVICIO] ([INT_CODIGOTIPOSERVICIO])
GO
ALTER TABLE [dbo].[TA_BOLETO] CHECK CONSTRAINT [FK_TA_BOLETO_TA_TIPO_SERVICIO]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_ALMACEN]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_ALMACEN] FOREIGN KEY([INT_CODIGO_ALMACEN])
REFERENCES [dbo].[TA_ALMACEN] ([INT_CODIGO_ALMACEN])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_ALMACEN]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_CLIENTE]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_CLIENTE] FOREIGN KEY([VCH_CLIENTE_ORIGEN])
REFERENCES [dbo].[TA_CLIENTE] ([VCH_DOCUMENTO])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_CLIENTE]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_CLIENTE1]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_CLIENTE1] FOREIGN KEY([VCH_CLIENTE_DESTINO])
REFERENCES [dbo].[TA_CLIENTE] ([VCH_DOCUMENTO])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_CLIENTE1]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_ESTADO1]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_ESTADO1] FOREIGN KEY([CHR_ESTADO])
REFERENCES [dbo].[TA_ESTADO] ([CHR_ESTADO])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_ESTADO1]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_GUIAREMISION]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_GUIAREMISION] FOREIGN KEY([INT_CODIGO_GUIA])
REFERENCES [dbo].[TA_GUIAREMISION] ([INT_CODIGO_GUIA])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_GUIAREMISION]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_TIPO_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_TIPO_CARGA] FOREIGN KEY([INT_TIPO_CARGA])
REFERENCES [dbo].[TA_TIPO_CARGA] ([INT_TIPO_CARGA])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_TIPO_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_CARGA_TA_TIPO_PAGO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGA_TA_TIPO_PAGO] FOREIGN KEY([INT_TIPO_PAGO])
REFERENCES [dbo].[TA_TIPO_PAGO] ([INT_TIPO_PAGO])
GO
ALTER TABLE [dbo].[TA_CARGA] CHECK CONSTRAINT [FK_TA_CARGA_TA_TIPO_PAGO]
GO
/****** Object:  ForeignKey [FK_TA_CARGOENTREGA_TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CARGOENTREGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_CARGOENTREGA_TA_CARGA] FOREIGN KEY([INT_CODIGO_CARGA])
REFERENCES [dbo].[TA_CARGA] ([INT_CODIGO_CARGA])
GO
ALTER TABLE [dbo].[TA_CARGOENTREGA] CHECK CONSTRAINT [FK_TA_CARGOENTREGA_TA_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_CLIENTE_TA_UBIGEO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_CLIENTE]  WITH CHECK ADD  CONSTRAINT [FK_TA_CLIENTE_TA_UBIGEO] FOREIGN KEY([INT_UBIGEO])
REFERENCES [dbo].[TA_UBIGEO] ([INT_CODIGO_UBIGEO])
GO
ALTER TABLE [dbo].[TA_CLIENTE] CHECK CONSTRAINT [FK_TA_CLIENTE_TA_UBIGEO]
GO
/****** Object:  ForeignKey [FK_dbo.TA_EDUCACIONES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_EDUCACIONES]  WITH CHECK ADD  CONSTRAINT [FK_dbo.TA_EDUCACIONES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA] FOREIGN KEY([INT_CODIGODETALLEHOJAVIDA])
REFERENCES [dbo].[TA_DETALLESHOJAVIDA] ([INT_CODIGODETALLEHOJAVIDA])
GO
ALTER TABLE [dbo].[TA_EDUCACIONES] CHECK CONSTRAINT [FK_dbo.TA_EDUCACIONES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA]
GO
/****** Object:  ForeignKey [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_EVALUACION_DESEMPENO]  WITH CHECK ADD  CONSTRAINT [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA] FOREIGN KEY([INT_CODIGOPERSONA])
REFERENCES [dbo].[TA_PERSONA] ([INT_CODIGOPERSONA])
GO
ALTER TABLE [dbo].[TA_EVALUACION_DESEMPENO] CHECK CONSTRAINT [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA]
GO
/****** Object:  ForeignKey [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA1]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_EVALUACION_DESEMPENO]  WITH CHECK ADD  CONSTRAINT [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA1] FOREIGN KEY([INT_CODIGOEVALUADO])
REFERENCES [dbo].[TA_PERSONA] ([INT_CODIGOPERSONA])
GO
ALTER TABLE [dbo].[TA_EVALUACION_DESEMPENO] CHECK CONSTRAINT [FK_TA_EVALUACION_DESEMPENO_TA_PERSONA1]
GO
/****** Object:  ForeignKey [FK_dbo.TA_EXPERIENCIASLABORALES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_EXPERIENCIASLABORAL]  WITH CHECK ADD  CONSTRAINT [FK_dbo.TA_EXPERIENCIASLABORALES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA] FOREIGN KEY([INT_CODIGODETALLEHOJAVIDA])
REFERENCES [dbo].[TA_DETALLESHOJAVIDA] ([INT_CODIGODETALLEHOJAVIDA])
GO
ALTER TABLE [dbo].[TA_EXPERIENCIASLABORAL] CHECK CONSTRAINT [FK_dbo.TA_EXPERIENCIASLABORALES_dbo.TA_DETALLESHOJAVIDA_INT_CODIGODETALLEHOJAVIDA]
GO
/****** Object:  ForeignKey [FK_TA_FICHA_MOVIMIENTO_TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_FICHA_MOVIMIENTO]  WITH CHECK ADD  CONSTRAINT [FK_TA_FICHA_MOVIMIENTO_TA_CARGA] FOREIGN KEY([INT_CODIGO_CARGA])
REFERENCES [dbo].[TA_CARGA] ([INT_CODIGO_CARGA])
GO
ALTER TABLE [dbo].[TA_FICHA_MOVIMIENTO] CHECK CONSTRAINT [FK_TA_FICHA_MOVIMIENTO_TA_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_FICHA_MOVIMIENTO_TA_TIPO_MOVIMIENTO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_FICHA_MOVIMIENTO]  WITH CHECK ADD  CONSTRAINT [FK_TA_FICHA_MOVIMIENTO_TA_TIPO_MOVIMIENTO] FOREIGN KEY([INT_TIPO_MOVIMIENTO])
REFERENCES [dbo].[TA_TIPO_MOVIMIENTO] ([INT_TIPO_MOVIMIENTO])
GO
ALTER TABLE [dbo].[TA_FICHA_MOVIMIENTO] CHECK CONSTRAINT [FK_TA_FICHA_MOVIMIENTO_TA_TIPO_MOVIMIENTO]
GO
/****** Object:  ForeignKey [FK_TA_PAGO_TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PAGO]  WITH CHECK ADD  CONSTRAINT [FK_TA_PAGO_TA_CARGA] FOREIGN KEY([INT_CODIGO_CARGA])
REFERENCES [dbo].[TA_CARGA] ([INT_CODIGO_CARGA])
GO
ALTER TABLE [dbo].[TA_PAGO] CHECK CONSTRAINT [FK_TA_PAGO_TA_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_PAGO_TA_ESTADO1]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PAGO]  WITH CHECK ADD  CONSTRAINT [FK_TA_PAGO_TA_ESTADO1] FOREIGN KEY([CHR_ESTADO])
REFERENCES [dbo].[TA_ESTADO] ([CHR_ESTADO])
GO
ALTER TABLE [dbo].[TA_PAGO] CHECK CONSTRAINT [FK_TA_PAGO_TA_ESTADO1]
GO
/****** Object:  ForeignKey [FK_TA_PASAJ_REFERENCE_TA_PERSO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PASAJERO]  WITH CHECK ADD  CONSTRAINT [FK_TA_PASAJ_REFERENCE_TA_PERSO] FOREIGN KEY([INT_CODIGOPERSONA])
REFERENCES [dbo].[TA_PERSONA] ([INT_CODIGOPERSONA])
GO
ALTER TABLE [dbo].[TA_PASAJERO] CHECK CONSTRAINT [FK_TA_PASAJ_REFERENCE_TA_PERSO]
GO
/****** Object:  ForeignKey [FK_TA_PERSONA_TA_CARGO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PERSONA]  WITH CHECK ADD  CONSTRAINT [FK_TA_PERSONA_TA_CARGO] FOREIGN KEY([INT_CODIGOCARGO])
REFERENCES [dbo].[TA_CARGO] ([INT_CODIGOCARGO])
GO
ALTER TABLE [dbo].[TA_PERSONA] CHECK CONSTRAINT [FK_TA_PERSONA_TA_CARGO]
GO
/****** Object:  ForeignKey [FK_TA_PERSONA_TA_TIPOSDOCUMENTO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PERSONA]  WITH CHECK ADD  CONSTRAINT [FK_TA_PERSONA_TA_TIPOSDOCUMENTO] FOREIGN KEY([INT_CODIGOTIPODOCUMENTO])
REFERENCES [dbo].[TA_TIPOSDOCUMENTO] ([INT_CODIGOTIPODOCUMENTO])
GO
ALTER TABLE [dbo].[TA_PERSONA] CHECK CONSTRAINT [FK_TA_PERSONA_TA_TIPOSDOCUMENTO]
GO
/****** Object:  ForeignKey [FK_TA_PRODUCTO_TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PRODUCTO]  WITH CHECK ADD  CONSTRAINT [FK_TA_PRODUCTO_TA_CARGA] FOREIGN KEY([INT_CODIGO_CARGA])
REFERENCES [dbo].[TA_CARGA] ([INT_CODIGO_CARGA])
GO
ALTER TABLE [dbo].[TA_PRODUCTO] CHECK CONSTRAINT [FK_TA_PRODUCTO_TA_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_PROGRAMACION_RUTA_TA_RUTA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA]  WITH CHECK ADD  CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_RUTA] FOREIGN KEY([INT_CODIGO_RUTA])
REFERENCES [dbo].[TA_RUTA] ([INT_CODIGO_RUTA])
GO
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA] CHECK CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_RUTA]
GO
/****** Object:  ForeignKey [FK_TA_PROGRAMACION_RUTA_TA_TIPO_SERVICIO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA]  WITH CHECK ADD  CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_TIPO_SERVICIO] FOREIGN KEY([INT_TIPO_SERVICIO])
REFERENCES [dbo].[TA_TIPO_SERVICIO] ([INT_CODIGOTIPOSERVICIO])
GO
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA] CHECK CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_TIPO_SERVICIO]
GO
/****** Object:  ForeignKey [FK_TA_PROGRAMACION_RUTA_TA_VEHICULO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA]  WITH CHECK ADD  CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_VEHICULO] FOREIGN KEY([INT_CODIGOVEHICULO])
REFERENCES [dbo].[TA_VEHICULO] ([INT_VEHICULO])
GO
ALTER TABLE [dbo].[TA_PROGRAMACION_RUTA] CHECK CONSTRAINT [FK_TA_PROGRAMACION_RUTA_TA_VEHICULO]
GO
/****** Object:  ForeignKey [FK_TA_SOLICITUDCOCINA_TA_REFRIGERIO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDCOCINA]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLICITUDCOCINA_TA_REFRIGERIO] FOREIGN KEY([INT_CODIGO_REFRIGERIO])
REFERENCES [dbo].[TA_REFRIGERIO] ([INT_CODIGO_REFRIGERIO])
GO
ALTER TABLE [dbo].[TA_SOLICITUDCOCINA] CHECK CONSTRAINT [FK_TA_SOLICITUDCOCINA_TA_REFRIGERIO]
GO
/****** Object:  ForeignKey [FK_dbo.TA_SOLICITUDESCAPACITACION_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDESCAPACITACION]  WITH CHECK ADD  CONSTRAINT [FK_dbo.TA_SOLICITUDESCAPACITACION_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD] FOREIGN KEY([INT_CODIGOSOLICITUD])
REFERENCES [dbo].[TA_SOLICITUDES] ([INT_CODIGOSOLICITUD])
GO
ALTER TABLE [dbo].[TA_SOLICITUDESCAPACITACION] CHECK CONSTRAINT [FK_dbo.TA_SOLICITUDESCAPACITACION_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD]
GO
/****** Object:  ForeignKey [FK_TA_SOLICITUDESCAPACITACION_TA_PERSONA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDESCAPACITACION]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLICITUDESCAPACITACION_TA_PERSONA] FOREIGN KEY([INT_CODIGOPERSONA])
REFERENCES [dbo].[TA_PERSONA] ([INT_CODIGOPERSONA])
GO
ALTER TABLE [dbo].[TA_SOLICITUDESCAPACITACION] CHECK CONSTRAINT [FK_TA_SOLICITUDESCAPACITACION_TA_PERSONA]
GO
/****** Object:  ForeignKey [FK_dbo.TA_SOLICITUDESPERSONAL_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDESPERSONAL]  WITH CHECK ADD  CONSTRAINT [FK_dbo.TA_SOLICITUDESPERSONAL_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD] FOREIGN KEY([INT_CODIGOSOLICITUD])
REFERENCES [dbo].[TA_SOLICITUDES] ([INT_CODIGOSOLICITUD])
GO
ALTER TABLE [dbo].[TA_SOLICITUDESPERSONAL] CHECK CONSTRAINT [FK_dbo.TA_SOLICITUDESPERSONAL_dbo.TA_SOLICITUDES_INT_CODIGOSOLICITUD]
GO
/****** Object:  ForeignKey [FK_TA_SOLICITUDINSUMO_TA_INSUMO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDINSUMO]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLICITUDINSUMO_TA_INSUMO] FOREIGN KEY([INT_CODIGO_INSUMO])
REFERENCES [dbo].[TA_INSUMO] ([INT_CODIGO_INSUMO])
GO
ALTER TABLE [dbo].[TA_SOLICITUDINSUMO] CHECK CONSTRAINT [FK_TA_SOLICITUDINSUMO_TA_INSUMO]
GO
/****** Object:  ForeignKey [FK_TA_SOLICITUDINSUMO_TA_SOLICITUDCOCINA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLICITUDINSUMO]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLICITUDINSUMO_TA_SOLICITUDCOCINA] FOREIGN KEY([INT_CODIGO_SOLICITUDCOCINA])
REFERENCES [dbo].[TA_SOLICITUDCOCINA] ([INT_CODIGO_SOLICITUDCOCINA])
GO
ALTER TABLE [dbo].[TA_SOLICITUDINSUMO] CHECK CONSTRAINT [FK_TA_SOLICITUDINSUMO_TA_SOLICITUDCOCINA]
GO
/****** Object:  ForeignKey [FK_TA_SOLPRODUCTODECABINA_TA_PRODUCTO_CABINA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLPRODUCTODECABINA]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLPRODUCTODECABINA_TA_PRODUCTO_CABINA] FOREIGN KEY([INT_CODIGO_PRODUCTOCABINA])
REFERENCES [dbo].[TA_PRODUCTO_CABINA] ([INT_CODIGO_PRODUCTOCABINA])
GO
ALTER TABLE [dbo].[TA_SOLPRODUCTODECABINA] CHECK CONSTRAINT [FK_TA_SOLPRODUCTODECABINA_TA_PRODUCTO_CABINA]
GO
/****** Object:  ForeignKey [FK_TA_SOLPRODUCTODECABINA_TA_PROGRAMACION_RUTA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_SOLPRODUCTODECABINA]  WITH CHECK ADD  CONSTRAINT [FK_TA_SOLPRODUCTODECABINA_TA_PROGRAMACION_RUTA] FOREIGN KEY([INT_CODIGO_PROGRAMACION_RUTA])
REFERENCES [dbo].[TA_PROGRAMACION_RUTA] ([INT_CODIGO_PROGRAMACION_RUTA])
GO
ALTER TABLE [dbo].[TA_SOLPRODUCTODECABINA] CHECK CONSTRAINT [FK_TA_SOLPRODUCTODECABINA_TA_PROGRAMACION_RUTA]
GO
/****** Object:  ForeignKey [FK_TA_STOCK_TA_SOLPRODUCTODECABINA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_STOCK]  WITH CHECK ADD  CONSTRAINT [FK_TA_STOCK_TA_SOLPRODUCTODECABINA] FOREIGN KEY([INT_CODIGO_PRODUCTOCABINA])
REFERENCES [dbo].[TA_SOLPRODUCTODECABINA] ([INT_CODIGO_SOLPRODUCTODECABINA])
GO
ALTER TABLE [dbo].[TA_STOCK] CHECK CONSTRAINT [FK_TA_STOCK_TA_SOLPRODUCTODECABINA]
GO
/****** Object:  ForeignKey [FK_TA_TRAZABILIDADCARGA_TA_CARGA]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_TRAZABILIDADCARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_TRAZABILIDADCARGA_TA_CARGA] FOREIGN KEY([INT_CODIGO_CARGA])
REFERENCES [dbo].[TA_CARGA] ([INT_CODIGO_CARGA])
GO
ALTER TABLE [dbo].[TA_TRAZABILIDADCARGA] CHECK CONSTRAINT [FK_TA_TRAZABILIDADCARGA_TA_CARGA]
GO
/****** Object:  ForeignKey [FK_TA_TRAZABILIDADCARGA_TA_ESTADO1]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_TRAZABILIDADCARGA]  WITH CHECK ADD  CONSTRAINT [FK_TA_TRAZABILIDADCARGA_TA_ESTADO1] FOREIGN KEY([CHR_ESTADO])
REFERENCES [dbo].[TA_ESTADO] ([CHR_ESTADO])
GO
ALTER TABLE [dbo].[TA_TRAZABILIDADCARGA] CHECK CONSTRAINT [FK_TA_TRAZABILIDADCARGA_TA_ESTADO1]
GO
/****** Object:  ForeignKey [FK_TA_USUARIO_TA_ROL]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_USUARIO]  WITH CHECK ADD  CONSTRAINT [FK_TA_USUARIO_TA_ROL] FOREIGN KEY([INT_CODIGO_ROL])
REFERENCES [dbo].[TA_ROL] ([INT_CODIGO_ROL])
GO
ALTER TABLE [dbo].[TA_USUARIO] CHECK CONSTRAINT [FK_TA_USUARIO_TA_ROL]
GO
/****** Object:  ForeignKey [FK_TA_USUARIO_TA_UBIGEO]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_USUARIO]  WITH CHECK ADD  CONSTRAINT [FK_TA_USUARIO_TA_UBIGEO] FOREIGN KEY([INT_CODIGO_UBIGEO])
REFERENCES [dbo].[TA_UBIGEO] ([INT_CODIGO_UBIGEO])
GO
ALTER TABLE [dbo].[TA_USUARIO] CHECK CONSTRAINT [FK_TA_USUARIO_TA_UBIGEO]
GO
/****** Object:  ForeignKey [FK_TA_VEHICULO_TA_TIPO_TRANSPORTE]    Script Date: 09/03/2014 12:33:17 ******/
ALTER TABLE [dbo].[TA_VEHICULO]  WITH CHECK ADD  CONSTRAINT [FK_TA_VEHICULO_TA_TIPO_TRANSPORTE] FOREIGN KEY([INT_TIPO_TRANSPORTE])
REFERENCES [dbo].[TA_TIPO_TRANSPORTE] ([INT_TIPO_TRANSPORTE])
GO
ALTER TABLE [dbo].[TA_VEHICULO] CHECK CONSTRAINT [FK_TA_VEHICULO_TA_TIPO_TRANSPORTE]
GO
